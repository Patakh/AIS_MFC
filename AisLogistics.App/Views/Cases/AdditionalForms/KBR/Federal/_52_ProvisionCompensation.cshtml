@model _52_ProvisionCompensationModel

<div id="additional-data-content">
    <div class="row g-3">
        <div class="col-8 mx-auto">
            <h6>Прошу выплатить мне компенсацию в размере 50 процентов от уплаченной мною страховой премии по договору обязательного страхования гражданской ответственности владельцев транспортных средств (далее - компенсация), так как я являюсь (нужное отметить)</h6>
            <div class="row mb-3">
                <div class="col-12">
                    <div class="form-check mb-2">
                        <input type="radio" class="form-check-input" asp-for="ApplicantCategory" id="ApplicantCategory1" value="1">
                        <label class="form-check-label" for="ApplicantCategory1">инвалидом, имеющим заключение о наличии медицинских показаний для приобретения транспортного средства (далее – ТС)</label>
                    </div>
                    <div class="form-check">
                        <input type="radio" class="form-check-input" asp-for="ApplicantCategory" id="ApplicantCategory2" value="2">
                        <label class="form-check-label" for="ApplicantCategory2">законным представителем (опекуном, попечителем) инвалида, в том числе ребенка-инвалида, имеющего заключение о наличии медицинских показаний для приобретения ТС</label>
                    </div>
                </div>
            </div>
            <h6>Данные инвалида</h6>
            <div class="row mb-3">
                <div class="col-6">
                    <label asp-for="DisabledPersonName" class="form-label"></label>
                    <input asp-for="DisabledPersonName" class="form-control" />
                    <span asp-validation-for="DisabledPersonName" class="text-danger"></span>
                </div>
                <div class="col-4">
                    <label asp-for="DisabledPersonBirthDate" class="form-label"></label>
                    <input type="text" asp-for="DisabledPersonBirthDate" class="form-control pickdate" />
                    <span asp-validation-for="DisabledPersonBirthDate" class="text-danger"></span>
                </div>
                <div class="col-2">
                    <label asp-for="DisabledPersonSnils" class="form-label"></label>
                    <input asp-for="DisabledPersonSnils" class="form-control snils" />
                    <span asp-validation-for="DisabledPersonSnils" class="text-danger"></span>
                </div>
            </div>
            <h6>Собственником ТС по договору ОСАГО является:</h6>
            <div class="row mb-3">
                <div class="col-12"> 
                    <div class="form-check mb-2">
                        <input type="radio" class="form-check-input" asp-for="VehicleOwner" id="VehicleOwner1" value="1">
                        <label class="form-check-label" for="VehicleOwner1">инвалид</label>
                    </div>
                    <div class="form-check mb-2">
                        <input type="radio" class="form-check-input" asp-for="VehicleOwner" id="VehicleOwner2" value="2">
                        <label class="form-check-label" for="VehicleOwner2">ребенок-инвалид</label>
                    </div>
                    <div class="form-check mb-2">
                        <input type="radio" class="form-check-input" asp-for="VehicleOwner" id="VehicleOwner3" value="3">
                        <label class="form-check-label" for="VehicleOwner3">законный представитель</label>
                    </div>
                    <div checkBlock>
                        <div class="form-check">
                            <input type="radio" class="form-check-input" asp-for="VehicleOwner" id="VehicleOwner4" value="4">
                            <label class="form-check-label" for="VehicleOwner4">иное лицо</label>
                        </div>
                        <div class="ms-3 ps-4" checkBlockBody>
                            <label class="form-label" asp-for="AnotherPerson"></label>
                            <input type="text" class="form-control" asp-for="AnotherPerson">
                            <span asp-validation-for="AnotherPerson" class="text-danger"></span>
                        </div>
                    </div>
                </div>
            </div>
            <h6>Страхователем ТС по договору ОСАГО является:</h6>
            <div class="row mb-3">
                <div class="col-12">
                    <div class="form-check mb-2">
                        <input type="radio" class="form-check-input" asp-for="VehicleInsurer" id="VehicleInsurer1" value="1">
                        <label class="form-check-label" for="VehicleInsurer1">инвалид</label>
                    </div>
                    <div class="form-check mb-2">
                        <input type="radio" class="form-check-input" asp-for="VehicleInsurer" id="VehicleInsurer2" value="2">
                        <label class="form-check-label" for="VehicleInsurer2">ребенок-инвалид</label>
                    </div>
                    <div class="form-check">
                        <input type="radio" class="form-check-input" asp-for="VehicleInsurer" id="VehicleInsurer3" value="3">
                        <label class="form-check-label" for="VehicleInsurer3">законный представитель</label>
                    </div>
                </div>
            </div>
            <h6>Информация о страховании</h6>
            <div class="row mb-3">
                <div class="col-md-6">
                    <label asp-for="InsurancePolicy" class="form-label"></label>
                    <input asp-for="InsurancePolicy" class="form-control" />
                    <span asp-validation-for="InsurancePolicy" class="text-danger"></span>
                </div>
                <div class="col-md-6">
                    <label asp-for="InsurancePremium" class="form-label"></label>
                    <input type="number" asp-for="InsurancePremium" class="form-control" />
                    <span asp-validation-for="InsurancePremium" class="text-danger"></span>
                </div>
            </div>
            <h6>Компенсацию прошу перечислить</h6>
            <div class="row mb-3">
                <div class="col-12">
                    <label asp-for="CompensationMethod" class="form-label"></label>
                    <select asp-for="CompensationMethod" class="form-control select2-nosearch">
                        <option>в кредитную организацию с указанием лицевого счета</option>
                        <option>через отделение федеральной почтовой связи по месту жительства (пребывания)</option>
                    </select>
                    <span asp-validation-for="CompensationMethod" class="text-danger"></span>
                </div>
            </div>
            <div class="row mb-3">
                <div class="col-md-6">
                    <label asp-for="BIC" class="form-label"></label>
                    <input asp-for="BIC" class="form-control bic" />
                    <span asp-validation-for="BIC" class="text-danger"></span>
                </div>
                <div class="col-md-6">
                    <label asp-for="AccountNumber" class="form-label"></label>
                    <input asp-for="AccountNumber" class="form-control account-number" />
                    <span asp-validation-for="AccountNumber" class="text-danger"></span>
                </div>
            </div>
            <h6>Способ получения решения (уведомления) о выплате компенсации или об отказе в выплате компенсации (нужное указать):</h6>
            <div class="row mb-3">
                <div class="col-12">
                    <div class="form-check mb-2">
                        <input type="radio" class="form-check-input" asp-for="DecisionMethod" id="DecisionMethod1" value="1">
                        <label class="form-check-label" for="DecisionMethod1">через личный кабинет на ЕПГУ (в случае направления заявления через ЕПГУ);</label>
                    </div>
                    <div class="mb-2" checkBlock>
                        <div class="form-check">
                            <input type="radio" class="form-check-input" asp-for="DecisionMethod" id="DecisionMethod2" value="2">
                            <label class="form-check-label" for="DecisionMethod2">направить по электронной почте</label>
                        </div>
                        <div class="ms-3 ps-4" checkBlockBody>
                            <label class="form-label" asp-for="DecisionEmail"></label>
                            <input type="text" class="form-control" asp-for="DecisionEmail">
                            <span asp-validation-for="DecisionEmail" class="text-danger"></span>
                        </div>
                    </div>
                    <div class="form-check mb-2">
                        <input type="radio" class="form-check-input" asp-for="DecisionMethod" id="DecisionMethod2" value="3">
                        <label class="form-check-label" for="DecisionMethod3">забрать лично в территориальном органе, по месту подачи заявления</label>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    var additionalForm = $('#additional-data-content');

    $(function () {

        additionalForm.find("select.select2-search").each(function () {
            $(this).select2({
                //dropdownParent: $("#mainModal"),
            });
        });
  
        additionalForm.find('select.select2-nosearch').each(function () {
            $(this).select2({
                minimumResultsForSearch: Infinity,
            })
        });

        additionalForm.find('.passport-series').inputmask('99 99', { clearIncomplete: true, placeholder: " " });
        additionalForm.find('.passport-number').inputmask('999999', { clearIncomplete: true, placeholder: " " });
        additionalForm.find('.snils').inputmask('999-999-999 99', { clearIncomplete: true, placeholder: " " });
        additionalForm.find('.bic').inputmask('999999999', { clearIncomplete: true, placeholder: " " });
        additionalForm.find('.account-number').inputmask('99999999999999999999', { clearIncomplete: false, placeholder: " " });

        let options = { clearIncomplete: true, showMaskOnHover: false };

        additionalForm.find(".pickdate").datepicker({
            language: "ru",
            autoclose: true
        }).inputmask("99.99.9999", options);

        togleFields()
    });

    additionalForm.find('[type="radio"], input[type="checkbox"]').on('click', function () {
        togleFields();
    });

    function togleFields() {
        additionalForm.find('[checkBlock] input[type="radio"], [checkBlock] input[type="checkbox"]').each(function () {
            let $block = $(this).closest('[checkBlock]');

            if ($(this).is(':checked')) {
                visibilityBlock($block.find('[checkBlockBody]'), false, false);
            } else {
                visibilityBlock($block.find('[checkBlockBody]'), true, true);
            }
        })
    }

    function visibilityBlock($block, hide, isDisabled) {

        switch (hide) {
            case true:
                $block.hide();
                break;
            case false:
                $block.show();
                break;
        }

        switch (isDisabled) {
            case true:
                $block.find('input, select').each(function () {
                    $(this).prop('disabled', true);
                });
                break;
            case false:
                $block.find('input, select').each(function () {
                    $(this).prop('disabled', false);
                });
                $block.find('[data-disabled]').each(function () {
                    visibilityBlock($(this), true, true);
                });
                break;
        }
    }


</script>
