 @model _92_1_ImplementationMigrationRegistrationModel

@{
    IEnumerable<SelectListItem> DocumentIdentity = new List<SelectListItem> {
             new ("Паспорт гражданина РФ", "Паспорт"),
             new ("Свидетельство о рождении",  "Свидетельство о рождении"),
             new ("Паспорт иностранного гражданина", "Паспорт"),
             new ("Свидетельство о рождении иностранного гражданина", "Свидетельство о рождении"),
             new ("Вид на жительство", "Вид на жительство"),
             new ("Загранпаспорт гражданина РФ", "Загранпаспорт гражданина РФ"),
             new ("Паспорт моряка", "Паспорт моряка"),
    };
}

<div id="additional-data-content">
    <div class="row g-3">
        <div class="col-8 mx-auto">
            <h5 class="my-2">СВЕДЕНИИ О ЛИЦЕ, ПОДЛЕЖАЩЕМ ПОСТАНОВКЕ НА УЧЕТ ПО МЕСТУ ПРЕБЫВАНИЯ</h5>
            <div class="row">
                <div class="col-4">
                    <label class="form-label" asp-for="Applicant!.LastName">Фамилия</label>
                    <input type="text" class="form-control" asp-for="Applicant!.LastName" />
                </div>
                <div class="col-4">
                    <label class="form-label" asp-for="Applicant!.FirstName">Имя</label>
                    <input type="text" class="form-control" asp-for="Applicant.FirstName">
                </div>
                <div class="col-4">
                    <label class="form-label" asp-for="Applicant!.SecondName">Отчество</label>
                    <input type="text" class="form-control" asp-for="Applicant!.SecondName">
                </div>
            </div>
            <div class="row mb-3">
                <div class="col-4">
                    <label class="form-label" asp-for="Applicant!.Citizenship">гражданство (подданство)</label>
                    <input type="text" class="form-control" asp-for="Applicant!.Citizenship">
                </div>
            </div>
            <br />
            <h6 class="my-2">Место рождения</h6>
            <div class="row">
                <div class="col-12">
                    <label class="form-label" asp-for="Applicant!.BirthPlace">город или другой населенный пункт</label>
                    <input type="text" class="form-control" asp-for="Applicant!.BirthPlace">
                </div>
            </div>
            <br />
            <h6 class="my-2">Документ, удостоверяющий личность</h6>
            <div class="row mb-3">
                <div class="col-12">
                    <label class="form-label" asp-for="Applicant!.IdentityDocument!.Type">Вид</label>
                    <select class="form-select select2-nosearch" asp-for="Applicant!.IdentityDocument!.Type" asp-items="@DocumentIdentity"></select>
                </div>
            </div>
            <div class="row mb-3">
                <div class="col-3">
                    <label class="form-label" asp-for="Applicant!.IdentityDocument!.Series">Серия</label>
                    <input type="text" class="form-control" asp-for="Applicant!.IdentityDocument!.Series">
                </div>
                <div class="col-3">
                    <label class="form-label" asp-for="Applicant!.IdentityDocument!.Number">Номер</label>
                    <input type="text" class="form-control" asp-for="Applicant!.IdentityDocument!.Number">
                </div>
                <div class="col-3">
                    <label class="form-label" asp-for="Applicant!.IdentityDocument!.IssuerDate">Дата выдачи</label>
                    <div class="input-group input-group-merge">
                        <span class="input-group-text"><i class="bi bi-calendar3"></i></span>
                        <input asp-for="Applicant!.IdentityDocument!.IssuerDate" type="text" class="form-control pickdate">
                    </div>
                </div>
                <div class="col-3">
                    <label class="form-label" asp-for="Applicant!.IdentityDocument!.ValidUntil">Действителен до</label>
                    <div class="input-group input-group-merge">
                        <span class="input-group-text"><i class="bi bi-calendar3"></i></span>
                        <input asp-for="Applicant!.IdentityDocument!.ValidUntil" type="text" class="form-control pickdate">
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-4">
                    <label class="form-label" asp-for="Applicant!.BirthDate">Дата рождения</label>
                    <div class="input-group input-group-merge">
                        <span class="input-group-text"><i class="bi bi-calendar3"></i></span>
                        <input asp-for="Applicant!.BirthDate" type="text" class="form-control pickdate">
                    </div>
                </div>
                <div class="col-4">
                    <label class="form-label" asp-for="Applicant!.Gender">Пол</label>
                    <select class="select2-nosearch" asp-for="Applicant!.Gender">
                        <option value="1">Мужской</option>
                        <option value="2">Женский</option>
                    </select>
                </div>
                <div class="col-4">
                    <label class="form-label" asp-for="Applicant!.Phone">Телефон</label>
                    <input type="text" class="form-control " asp-for="Applicant!.Phone" maxlength="10">
                </div>
            </div>
            <br />
            <h6 class="my-2">Вид и реквизиты документа, подтверждающего право на пребывание (проживание) в Российской Федерации</h6>
            <div class="row">
                <div class="col-12">
                    <label class="form-label" asp-for="SpaceDoc!.Type">Вид</label>
                    <select class="select2-nosearch" asp-for="SpaceDoc!.Type">
                        <option value="">Не выбрано</option>
                        <option value="1">Виза</option>
                        <option value="2">Вид на жительство</option>
                        <option value="3">Разрешение на временное проживание</option>
                        <option value="4">Разрешение на временное проживание в целях получения образования</option>
                    </select>
                </div>
            </div>
            <div class="row">
                <div class="col-3">
                    <label class="form-label" asp-for="SpaceDoc!.Series">Серия</label>
                    <input type="text" class="form-control" asp-for="SpaceDoc!.Series">
                </div>
                <div class="col-3">
                    <label class="form-label" asp-for="SpaceDoc!.Number">Номер</label>
                    <input type="text" class="form-control" asp-for="SpaceDoc!.Number">
                </div>
                <div class="col-3">
                    <label class="form-label" asp-for="SpaceDoc!.IssuerDate">Дата выдачи</label>
                    <div class="input-group input-group-merge">
                        <span class="input-group-text"><i class="bi bi-calendar3"></i></span>
                        <input asp-for="SpaceDoc!.IssuerDate" type="text" class="form-control pickdate">
                    </div>
                </div>
                <div class="col-3">
                    <label class="form-label" asp-for="SpaceDoc!.ValidUntil">Действителен до</label>
                    <div class="input-group input-group-merge">
                        <span class="input-group-text"><i class="bi bi-calendar3"></i></span>
                        <input asp-for="SpaceDoc!.ValidUntil" type="text" class="form-control pickdate">
                    </div>
                </div>
            </div>
            <br />
            <h6 class="my-2">Прочие сведения об иностранном гражданине</h6>
            <div class="row mb-3">
                <div class="col-12">
                    <label class="form-label" asp-for="Profession">Профессия</label>
                    <input type="text" class="form-control" asp-for="Profession">
                </div>
                <div class="col-4">
                    <label class="form-label" asp-for="PurposeDeparture">Цель выезда</label>
                    <select class="select2-nosearch" asp-for="PurposeDeparture">
                        <option value="1">служебная</option>
                        <option value="2">туризм</option>
                        <option value="3">деловая</option>
                        <option value="4">учеба</option>
                        <option value="5">работа</option>
                        <option value="6">частная</option>
                        <option value="7">транзит</option>
                        <option value="8">гуманитарная</option>
                        <option value="9">иная</option>
                    </select>
                </div>
                <div class="col-4">
                    <label class="form-label" asp-for="DepartureDate">Дата выезда</label>
                    <div class="input-group input-group-merge">
                        <span class="input-group-text"><i class="bi bi-calendar3"></i></span>
                        <input asp-for="DepartureDate" type="text" class="form-control pickdate">
                    </div>
                </div>
                <div class="col-4">
                    <label class="form-label" asp-for="DurationStayTo">Срок пребывания до</label>
                    <div class="input-group input-group-merge">
                        <span class="input-group-text"><i class="bi bi-calendar3"></i></span>
                        <input asp-for="DurationStayTo" type="text" class="form-control pickdate">
                    </div>
                </div>
            </div>
            <br />
            <h6 class="my-2">Миграционная карта</h6>
            <div class="row">
                <div class="col-6">
                    <label class="form-label" asp-for="MigrationCardInfo!.Series">Серия</label>
                    <input type="text" class="form-control" asp-for="MigrationCardInfo.Series">
                </div>
                <div class="col-6">
                    <label class="form-label" asp-for="MigrationCardInfo!.Number">Номер</label>
                    <input type="text" class="form-control" asp-for="MigrationCardInfo!.Number">
                </div>
            </div>
            <div class="row mb-3">
                <div class="col-12">
                    <label class="form-label" asp-for="InformationRepresentatives">Сведения о законных представителях</label>
                    <textarea type="text" class="form-control" asp-for="InformationRepresentatives">
                        </textarea>
                </div>
                <div class="col-12">
                    <label class="form-label" asp-for="AddressStayRF">Адрес прежнего места пребывания в Российской Федерации</label>
                    <textarea type="text" class="form-control" asp-for="AddressStayRF">
                        </textarea>
                </div>
            </div>
            <br />
            <h6 class="my-2">Адрес места пребывания</h6>
            <div class="row mb-3">
                <div class="col-6">
                    <label class="form-label" asp-for="AddressPlaceStay!.Region">Область, край, республика, АО</label>
                    <input type="text" class="form-control" asp-for="AddressPlaceStay!.Region">
                </div>
                <div class="col-6">
                    <label class="form-label" asp-for="AddressPlaceStay!.District">Район</label>
                    <input type="text" class="form-control" asp-for="AddressPlaceStay!.District">
                </div>
                <div class="col-6">
                    <label class="form-label" asp-for="AddressPlaceStay!.City">Город или другой населенный пункт</label>
                    <input type="text" class="form-control" asp-for="AddressPlaceStay!.City">
                </div>
                <div class="col-6">
                    <label class="form-label" asp-for="AddressPlaceStay!.Street">Улица</label>
                    <input type="text" class="form-control" asp-for="AddressPlaceStay!.Street">
                </div>
                <div class="col-6">
                    <label class="form-label" asp-for="AddressPlaceStay!.TypeOwnership">Тип собственности</label>
                    <input type="text" class="form-control" asp-for="AddressPlaceStay!.TypeOwnership">
                </div>
                <div class="col-3">
                    <label class="form-label" asp-for="AddressPlaceStay!.House">Дом</label>
                    <input type="text" class="form-control" asp-for="AddressPlaceStay!.House">
                </div>
                <div class="col-3">
                    <label class="form-label" asp-for="AddressPlaceStay!.Body">Корпус</label>
                    <input type="text" class="form-control" asp-for="AddressPlaceStay!.Body">
                </div>
                <div class="col-3">
                    <label class="form-label" asp-for="AddressPlaceStay!.Building">Строение</label>
                    <input type="text" class="form-control" asp-for="AddressPlaceStay!.Building">
                </div>
                <div class="col-3">
                    <label class="form-label" asp-for="AddressPlaceStay!.Flat">Квартира</label>
                    <input type="text" class="form-control" asp-for="AddressPlaceStay!.Flat">
                </div>
                <div class="col-6">
                    <label class="form-label" asp-for="AddressPlaceStay!.TypeHousing">Тип жилищного помещения</label>
                    <input type="text" class="form-control" asp-for="AddressPlaceStay!.TypeHousing">
                </div>
                <div class="col-6">
                    <label class="form-label" asp-for="AddressPlaceStay!.PlaceStay">Место пребывания</label>
                    <select class="select2-nosearch" asp-for="AddressPlaceStay!.PlaceStay">
                        <option value="1">Жилое помещение</option>
                        <option value="2">Иное помещение</option>
                        <option value="3">Организация</option>
                    </select>
                </div>
            </div>
            <br />
            <h5 class="my-2">Сведения о принимающей стороне</h5> <div class="row mb-3">
                <div class="row mb-3">
                    <div class="col-4">
                        <div class="form-check form-check-inline mt-2">
                            <input class="form-check-input" type="radio" id="typeReceiving1" name="ReceivingParty.Type" value="1">
                            <label class="form-check-label" for="typeReceiving1">Организация</label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" id="typeReceiving2" name="ReceivingParty.Type" value="2" checked="@(Model.ReceivingParty != null && string.IsNullOrEmpty(Model.ReceivingParty.Type) ? "checked" : "")">
                            <label class="form-check-label" for="typeReceiving2">Физическое лицо</label>
                        </div>
                    </div>
                </div>
                <br />
                <h6 class="my-2">Документ, удостоверяющий личность принимающей стороны</h6>
                <div class="row mb-3">
                    <div class="col-3">
                        <label class="form-label" asp-for="ReceivingParty!.IdentityDocument!.ValidUntil">Действителен до</label>
                        <div class="input-group input-group-merge">
                            <span class="input-group-text"><i class="bi bi-calendar3"></i></span>
                            <input asp-for="ReceivingParty!.IdentityDocument!.ValidUntil" type="text" class="form-control pickdate">
                        </div>
                    </div>
                </div>
                <br />
                <h6 class="my-2">Адрес регистрации по месту жительства принимающей стороны</h6>
                <div class="row">
                    <div class="col-6">
                        <label class="form-label" asp-for="ReceivingParty!.ResidenceAddress!.Region">Область, край, республика, АО</label>
                        <input type="text" class="form-control" asp-for="ReceivingParty!.ResidenceAddress!.Region">
                    </div>
                    <div class="col-6">
                        <label class="form-label" asp-for="ReceivingParty!.ResidenceAddress!.District">Район</label>
                        <input type="text" class="form-control" asp-for="ReceivingParty!.ResidenceAddress!.District">
                    </div>
                    <div class="col-6">
                        <label class="form-label" asp-for="ReceivingParty!.ResidenceAddress!.City">Город или другой населенный пункт</label>
                        <input type="text" class="form-control" asp-for="ReceivingParty!.ResidenceAddress!.City">
                    </div>
                    <div class="col-6">
                        <label class="form-label" asp-for="ReceivingParty!.ResidenceAddress!.Street">Улица</label>
                        <input type="text" class="form-control" asp-for="ReceivingParty!.ResidenceAddress!.Street">
                    </div>
                    <div class="col-3">
                        <label class="form-label" asp-for="ReceivingParty!.ResidenceAddress!.House">Дом</label>
                        <input type="text" class="form-control" asp-for="ReceivingParty!.ResidenceAddress!.House">
                    </div>
                    <div class="col-3">
                        <label class="form-label" asp-for="ReceivingParty!.ResidenceAddress!.Body">Корпус</label>
                        <input type="text" class="form-control" asp-for="ReceivingParty!.ResidenceAddress!.Body">
                    </div>
                    <div class="col-3">
                        <label class="form-label" asp-for="ReceivingParty!.ResidenceAddress!.Building">Строение</label>
                        <input type="text" class="form-control" asp-for="ReceivingParty!.ResidenceAddress!.Building">
                    </div>
                    <div class="col-3">
                        <label class="form-label" asp-for="ReceivingParty!.ResidenceAddress!.Flat">Квартира</label>
                        <input type="text" class="form-control" asp-for="ReceivingParty!.ResidenceAddress!.Flat">
                    </div>
                </div>
                <div class="row mb-3">
                    <div class="col-9">
                        <label class="form-label" asp-for="ReceivingParty!.OrganizationName">Наименование организации </label>
                        <input type="text" class="form-control" asp-for="ReceivingParty!.OrganizationName">
                    </div>
                    <div class="col-3">
                        <label class="form-label" asp-for="ReceivingParty!.OrganizationINN">ИНН</label>
                        <input type="text" class="form-control" asp-for="ReceivingParty!.OrganizationINN">
                    </div>
                    <div class="col-12">
                        <label class="form-label" asp-for="ReceivingParty!.OrganizationAdressRegistration">Адрес организации</label>
                        <input type="text" class="form-control" asp-for="ReceivingParty!.OrganizationAdressRegistration">
                    </div>
                    <div class="col-12">
                        <label class="form-label" asp-for="RightHouse">Наименование и реквизиты документа, подтверждающего право пользования помещением</label>
                        <input type="text" class="form-control" asp-for="RightHouse">
                    </div>
                </div>
                <div class="row mb-3" checkBlock>
                    <div class="col-12">
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" asp-for="IsActualResidenceAddress">
                            <label class="form-check-label" asp-for="IsActualResidenceAddress">Фактическое место нахождения (Заполняется в случае постановки на миграционный учет иностранного гражданина по адресу организации)</label>
                        </div>
                    </div>
                    <div class="col-12" checkBlockBody>
                        <h6 class="my-2">Фактическое место нахождения</h6>
                        <div class="row">
                            <div class="col-6">
                                <label class="form-label" asp-for="ActualResidenceAddress!.Region">Область, край, республика, АО</label>
                                <input type="text" class="form-control" asp-for="ActualResidenceAddress!.Region">
                            </div>
                            <div class="col-6">
                                <label class="form-label" asp-for="ActualResidenceAddress!.District">Район</label>
                                <input type="text" class="form-control" asp-for="ActualResidenceAddress!.District">
                            </div>
                            <div class="col-6">
                                <label class="form-label" asp-for="ActualResidenceAddress!.City">Город или другой населенный пункт</label>
                                <input type="text" class="form-control" asp-for="ActualResidenceAddress!.City">
                            </div>
                            <div class="col-6">
                                <label class="form-label" asp-for="ActualResidenceAddress!.Street">Улица</label>
                                <input type="text" class="form-control" asp-for="ActualResidenceAddress!.Street">
                            </div>
                            <div class="col-12">
                                <label class="form-label" asp-for="ActualResidenceAddress!.CadastralNumber">
                                    Кадастровый номер земельного участка
                                </label>
                                <input type="text" class="form-control" asp-for="ActualResidenceAddress!.CadastralNumber">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    var additionalForm = $('#additional-data-content');
    var btnNext = $('.btn-next');

    $(function () {

        let options = {
            clearIncomplete: true,
            showMaskOnHover: false
        };

        additionalForm.find(".pickdate").datepicker({
            language: "ru",
            autoclose: true
        }).inputmask("99.99.9999", options);

        additionalForm.find("select.select2-search").each(function () {
            $(this).select2({
                //dropdownParent: $("#mainModal"),
            });
        });

        additionalForm.find("[name$=Phone]").inputmask("[9]{10}", options);
        additionalForm.find("[name$=OrganizationINN]").inputmask("[9]{10}", options);

        additionalForm.find("select.select2-nosearch").each(function () {
            $(this).select2({
                minimumResultsForSearch: Infinity,
            });
        });
        additionalForm.find('select.select2-nosearch').each(function () {
            $(this).select2({
                minimumResultsForSearch: Infinity,
            })
        });

        togleFields();
    });

    additionalForm.find("#IsActualResidenceAddress").on('click', function () {
        togleFields();
    });
    function togleFields() {
        additionalForm.find('[checkBlock] input[type="radio"], [checkBlock] input[type="checkbox"]').each(function () {
            let $block = $(this).closest('[checkBlock]');

            if ($(this).is(':checked')) {
                visibilityBlock($block.find('[checkBlockBody]'), false, false);
            } else {
                visibilityBlock($block.find('[checkBlockBody]'), true, true);
            }
        })
    }

    function visibilityBlock($block, hide, isDisabled) {
        switch (hide) {
            case true:
                $block.slideUp(400);
                break;
            case false:
                $block.slideDown(400);
                break;
        }

        switch (isDisabled) {
            case true:
                $block.find('input, select').each(function () {
                    $(this).prop('disabled', true);
                });
                break;
            case false:
                $block.find('input, select').each(function () {
                    $(this).prop('disabled', false);
                });
                $block.find('[data-disabled]').each(function () {
                    visibilityBlock($(this), true, true);
                });
                break;
        }
    }
</script>
